<html>
  <head>
    <script src='javascripts/jquery/jquery-1.5.1.min.js'></script>
    <script src='javascripts/jquery/jstorage.min.js'></script>
    <!-- <script src='javascripts/swfobject.js'></script> -->
    <!-- <script src='javascripts/FABridge.js'></script> -->
    <!-- <script src='javascripts/web_socket.js'></script> -->

    <script type="text/javascript">

      $(document).ready(function() {

        function debug(str) {
          $("#debug").append("<div>" + str + "</div>");
        }

        function example(str) {
          $("#example").append("<div>" + str + "</div>");
        }

        function msg(str) {
          $("#msg").append("<p>" + str + "</p>");
        }

        ws = new WebSocket("ws://localhost:8080?client_id=test-client-1");

        ws.onopen = function() {
          debug("Connected...");
          example('Open your Javascript console and enter the following: <pre>ws.send(\'{"method":"send","params":{"receivers":["test-client-1"], "channels":["broadcast"],"payload":"Hello Mark!"}}\');</pre>');
        }

        ws.onmessage = function(evt) {
          msg(evt.data);
        }

        ws.onclose = function() {
          debug("socket closed");
        }

      });

    </script>
  </head>
  <body>
    <div id="debug" style="background:#ddf; padding:10px; margin:10px;"></div>
    <div id="example" style="background:#ddd; padding:10px;  margin:10px;"></div>
    <div id="msg" style="background:#fafafa; padding:10px;  margin:10px; border:1px solid #999; font-family:Courier; font-size:0.8em;"></div>
  </body>
</html>
